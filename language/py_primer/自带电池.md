# 自带电池

---

现在已经介绍了Python语言的大部分基础知识,python语言的核心非常强大,同时还提供了许多值得一试的工具,其中标准安装的一组模块称为标准库.本章介绍的是其中一些的工作方式,提供的功能.

---

## 10.1 模块

```python
>>> import math
>>> math.sqrt(0)
```

### 10.1.1 模块是程序

**添加搜索目录**

任何python程序都可以作为模块导入,使用以下方法可以将自己写的模块导入

```python
>>> import sys
>>> sys.path.append('absolute path')
#以上是windows的方法
```

在unix中,不能简单地将字符串`~/path`添加到路径中,而要使用绝对路径,如果想要这个操作自动完成需要使用`sys.path.expanduser('~/path')`

以上这些操作,告诉解释器,除了在默认的目录寻找之外,还要前往指定的目录寻找

**新文件?**

在导入模块的时候,发现文件夹下出现了`.pyc`后缀的文件,这是解释器平台无关的经过处理的文件,其中的内容能够被更加有效地处理,下次处理,会默认导入`.pyc`文件.

但是即使删除这个文件,也不会有很大的影响,解释器会自动处理源文件以生成新的`.py`文件

**只导入一次**

- 只导入一次的行为在绝大多数情况下是一种实质性优化,尤其在两个模块互相导入时非常重要
- 如果坚持重新导入模块可以使用内建的reload模块,使用一个要重新导入的模块作为参数
- 在py3中,已经去掉了reload函数,尽管使用exec函数可以达到相同的效果,但是仍然要避免二次导入

### 10.1.2 模块用于定义

- 模块在第一次被导入到程序中被执行
- 内容可以保持自己的作用域

**在模块中定义自己的函数**

如果希望模块能够像程序一样被执行,可以对python解释器使用-m开关来执行程序

- 在模块中定义
- 使用module.function()模式使用

**在模块中增加测试代码**

```python
def hello():
    pass

if _name_ ='main':test
```

### 10.1.3 让你的模块可用

**将模块放在正确的位置**

```python
import sys,pprint
pprint.pprint(sys.path)
# 打印你的系统路径
```
尽管列出来的路径都可以使用,但对应版本的python下的site-package总是最好的选择

**告诉编译器去哪里找**

以下几种情况,使用自己的路径,然后告诉编译器去哪里找是好的选择

- 不希望将自己的模块填满python解释器的目录
- 没有在python解释器目录中储存文件的权利
- 想要将模块放在其他地方

当然可以使用修改sys.path的方法,但是标准的方法是设置PYTHONPATH环境变量

- 在unix系中,如果在使用类似bash的shell文件,则设置.bashrc将以下内容加入

```shell
export PYTHONPATH=$PYTHONPATH:<absolute path>
```

- 在windows下,搜索系统环境变量即可
- 如果不修改,和可以让python来代替你完成这些
  - 配置路径文件,它是以pth为拓展名的文件

**命名文件**

包含模块代码的文件使用.py或者.pyw(win特有)作为后缀

### 10.1.4 包

可以将模块组织成为包,而让python将其视为包看待,则需要在文件夹下设置一个命名为__init__.py的文件

多层包可以嵌套,但是在每一层嵌套的文件夹下,必须有__init__.py

---

## 10.2 探究模块

学习模块和了解模块需要一些方法,可以帮助我们更快的了解新的或者修改的模块

### 10.2.1 模块中有什么

**dir**

dir函数可以列出对象所有的特性(以及模块所有的函数,变量),包含下划线的也会被展示

**__all__**

这个变量本身包含一个列表,这个列表已经在模块中被默认设置. 它定义了模块的公有接口,`from xxx import *`会导入__all__中包含了的名字

### 10.2.2 用help获得帮助

help函数可以从对象的文本字符串取出信息(__doc__类似)以及更多细节上的透彻讨论

### 10.2.3 文档

查看文档绝大多数情况下是有效地办法

### 10.2.4 使用源代码

查看模块的__file__属性是查看文档位置快捷有效地办法

