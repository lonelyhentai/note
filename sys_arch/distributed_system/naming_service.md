# 分布式系统 - 名称服务

## 1. 名称、地址和路由

**a. 名称表示（indicate）如何查找**

- 人类可读
- 全局地址名称（URNs）

**b. 一个地址表示何处**

- IP 地址和端口号

**c. 路由告知如何到达**

- 因特网路由

**d. 名称和IP地址并非1对1映射**

- 一个主机可以映射到一个以上名称
- 一个主机可以有多个地址
- 名称不一定反映（reflect）地理位置（geographical locations）

## 2. 名称层次：

**a. 因特网名称是层次化的**

- 更好的伸缩性
- 更好的名称空间管理

**b. 顶级域**

- 国家代码域：uk、de、jp、us、tv
- 通用域：aero、biz、com、coop、edu、gov、info、int、mil、museum、name、net、org、pro
- 基础域：arpa

**c. 如何得到域名：**

- 互联网名称的数字地址的赋予是有国际化组织、非营利性机构ICANN负责，其职责为：
    - 通用和国家码的顶级域的管理
    - 地址空间分配（allocation）
    - 协议标识符授予
    - 根服务器管理
- ICANN授予公司去注册域

## 3. 名称服务

**a. 概念**：名称服务器维护了一个数据库来绑定人类可读名称和对象属性

**b. 困难性缘由**：在开放性分布式系统中，数据库是分布的被多个服务器管理，这些服务器时解析名称所必要的：

**c. 要求：**

- 开放性
- 伸缩性
- 错误容忍（可用性）

### DNS：Domain Name System

- 分布式数据有多个名称服务器层次化实现
- DNS 服务器：
    - 主机名称解析
    - 邮件主机地址
    - 反向解析
    - 常见服务器
- 添加和删除名称，是由授权管理机构手动编辑名称数据库
- 不中心化的原因：
    - 单点故障
    - 传输容量
    - 中心化数据库的距离
    - 可维护性
    - 伸缩性
- 元素：
    - 名称服务器：
        - 在主机上运行，处理DNS请求的进程
    - 本地名称服务器：
        - 每一个ISP、公司、机构都有本地域名服务
        - DNS查询通常首先到达本地名称服务器
    - 授权名称服务器：
        - 为特定域名和区执行（perform）名称和地址翻译
        - 为名称地址映射的数据库有管理员维护
        - 名称服务器被组织成层次化结构在层次化地址空间中
- 查询：
    - 递归查询、迭代查询
    - DNS标准支持递归查询和迭代查询，当DNS服务器进行解析请求时，其会声明需要哪种方式
    - 某些DNS服务器，主要是高级的服务器，出于安全因素，不支持递归查询
    - 为解析名称，递归和迭代查询的混合通常被用在不同的层次中；客户端向本地域名服务器发出请求通常采用递归方式
- 首要（Primary）服务器和备用（Secondary）服务器：处于错误容忍，两个服务器提供权威（authoritative）数据
- 记录类型：
    - A
        - name
        - value
    - AAAA
        - name
        - value
    - NS
        - name
        - value：next server
    - CNAME
        - name
        - value：forward
    - MX
        - mailserver
- 命令：nslookup
